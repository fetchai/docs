import {
  Note,
  Properties,
  Property,
  Warn,
  Section,
  ApiIntro,
  Tag,
  CodeHeading,
} from "../../../../components/mdx";
import { DropDownTabs, Tab } from "../../../../components/mdx";
import { Row, Col } from "../../../../components/mdx";
import {
  ApiEndpointRequestResponse,
  ApiRequest,
  ApiResponses,
} from "../../../../components/api-endpoint";

# Envelope

## Envelope Objects

```python
class Envelope(BaseModel)
```

Represents an envelope for message communication between agents.

**Attributes**:

<Row>
    <Properties>
      <Property name="version" type="_int_">
                The envelope version. 
      </Property>
      <Property name="sender" type="_str_">
             The sender's address.  
      </Property>
    <Property name="target" type="_str_">
             The target's address.  
      </Property>
      <Property name="session" type="_UUID4_">
             The session UUID that persists for back-and-forth dialogues between agents. 
      </Property>
      <Property name="schema_digest" type="_str_">
             The schema digest for the enclosed message (alias for protocol).  
      </Property>
      <Property name="protocol_digest" type="_Optional[str]_">
             The digest of the protocol associated with the message (optional).  
      </Property>
      <Property name="payload" type="_Optional[str]_">
             The encoded message payload of the envelope (optional).  
      </Property>
      <Property name="expires" type="_Optional[int]_">
             The expiration timestamp (optional).  
      </Property>
      <Property name="nonce" type="_Optional[int]_">
             The nonce value (optional). 
      </Property>
      <Property name="signature" type="_Optional[str]_">
             The envelope signature (optional).
      </Property>
    </Properties>
</Row>

#### encode`_`payload

```python
def encode_payload(value: JsonStr)
```

Encode the payload value and store it in the envelope.

**Arguments**:

- `value` _JsonStr_ - The payload value to be encoded.

#### decode`_`payload

```python
def decode_payload() -> Optional[Any]
```

Decode and retrieve the payload value from the envelope.

**Returns**:

- `Optional[Any]` - The decoded payload value, or None if payload is not present.

#### sign

```python
def sign(identity: Identity)
```

Sign the envelope using the provided identity.

**Arguments**:

- `identity` _Identity_ - The identity used for signing.

#### verify

```python
def verify() -> bool
```

Verify the envelope's signature.

**Returns**:

- `bool` - True if the signature is valid, False otherwise.
