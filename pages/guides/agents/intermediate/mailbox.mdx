import { Callout } from 'nextra/components'

# Agent Mailboxes

Agents can't always be online, say for a powercut, or simply they're only online while you are. This can be a problem,
ideally agents should be available online as much as they can to not miss opportunity, or contact. For this reason
we created Mailbox on agentverse. Mailbox is the middleman that acts as a mailbox for all communication to you.
Messages get stored there, and your uAgent will collect them when they're online.

First we need to have an agent set up, and running before we can register for a Mailbox. Let's get started.

## Create a Mailbox in Agentverse

Be sure that you are signed into [Agentverse.ai  ↗️](https://agentverse.ai), then let's create a Mailbox. To
create a Mailbox,
[retrieve your local agent address ↗️](/guides/agents/getting-started/getting-uagent-address#print-uagent-address) within your terminal and head over to the **Agentverse: My Agents** tab. Here, click on **Local Agents** and click on **Connect Local Agent**.

![](src/images/guides/agentverse/mailbox/mailbox_1.png)

You will need to provide the **address of the local agent** you wish to retrieve and wait for confirmation.

![](src/images/guides/agentverse/mailbox/mailbox_2.png)

Then, you will have to give a **name** for the agent. Once you do so and confirm, you will see a **Mailbox API Key** showing up. Copy and paste it within your local agent code by filling up the `AGENT_MAILBOX_KEY` field inline. You can now restart your agent.

    <Callout type="warning" emoji="⚠️">
      Remember, each agent needs a different dedicated mailbox!
    </Callout>

Let's now checkout an example for a **local agent** setup.

### Local agent setup

Let's start by creating a local agent named `alice`, alice responds hello to any agent that sends a message to her,
providing the message has a type of `Message`

    ```py copy filename="agent_1.py"
    from uagents import Agent, Context, Model

    class Message(Model):
        message: str

    # First generate a secure seed phrase (e.g. https://pypi.org/project/mnemonic/)
    SEED_PHRASE = "put_your_seed_phrase_here"

    # Copy the address shown below
    print(f"Your agent's address is: {agent.address}")

    # Now go to https://agentverse.ai, register your agent in the Mailroom by providing the address you just copied.
    # Then, copy the agent's mailbox key and insert it here below inline
    AGENT_MAILBOX_KEY = "put_your_AGENT_MAILBOX_KEY_here"

    # Now your agent is ready to join the agentverse!
    agent = Agent(
        name="alice",
        seed=SEED_PHRASE,
        mailbox=f"{AGENT_MAILBOX_KEY}@https://agentverse.ai",
    )

    @agent.on_message(model=Message, replies={Message})
    async def handle_message(ctx: Context, sender: str, msg: Message):
        ctx.logger.info(f"Received message from {sender}: {msg.message}")

    if __name__ == "__main__":
        agent.run()
   ```

You can easily create a Mailbox by first retrieving your local agent address and head over to the **Agentverse: My Agents** tab. Here, click on **Local Agents** and click on **Connect Local Agent**.

![](src/images/guides/agentverse/mailbox/agentverse:mailbox/mailbox_1.png)

You will need to provide the address of the local agent you wish to retrieve and wait for confirmation. You will then need to provide a **name** for the agent.

![](src/images/guides/agentverse/mailbox/agentverse:mailbox/mailbox_2.png)

Once you do so and confirm, you will see a **Mailbox API Key** showing up. Paste it within your local agent code above by filling up the `AGENT_MAILBOX_KEY` field inline.

![](src/images/guides/agentverse/mailbox/agentverse:mailbox/mailbox_3.png)

You can then restart your agent, now your agent doesn't need to run all the time as their messages will be waiting for them for when they come back online!
