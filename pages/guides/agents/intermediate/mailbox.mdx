import { Callout } from 'nextra/components'

# Agent Mailboxes

## Introduction

Agents can communicate with other agents registered on the Fetch Network without the need to be constantly online and without requiring your constant presence to operate. This is achieved thanks to the **Agentverse Mailbox** functionality.

## Create a Mailbox in Agentverse

The **Agentverse** assists you in setting up mailboxes for local and Agentverse agents, allowing them to have a two-way communication with each other without the need to be constantly online and without requiring your constant presence to operate.

To create a Mailbox, retrieve your local agent address within your terminal and head over to the **Agentverse: My Agents** tab. Here, click on **Local Agents** and click on **Connect Local Agent**.

![](src/images/guides/agentverse/mailbox/mailbox_1.png)

You will need to provide the **address of the local agent** you wish to retrieve and wait for confirmation.

![](src/images/guides/agentverse/mailbox/mailbox_2.png)

Then, you will have to give a **name** for the agent. Once you do so and confirm, you will see a **Mailbox API Key** showing up. Copy and paste it within your local agent code by filling up the `AGENT_MAILBOX_KEY` field inline. You can now restart your agent.

    <Callout type="warning" emoji="⚠️">
      Remember, each agent needs a different dedicated mailbox!
    </Callout>

Let's now checkout an example for a **local agent code** setup.

### Local agent setup

Let's start by creating a local agent named `alice` with a `handle_message()` function using an `@agent.on_message()` decorator to handle messages received by other agents and matching the `Message` class:

    ```py copy
    from uagents import Agent, Context, Model

    class Message(Model):
        message: str

    # First generate a secure seed phrase (e.g. https://pypi.org/project/mnemonic/)
    SEED_PHRASE = "put_your_seed_phrase_here"

    # Copy the address shown below
    print(f"Your agent's address is: {Agent(seed=SEED_PHRASE).address}")

    # Then go to https://agentverse.ai, register your agent in the Mailroom
    # and copy the agent's mailbox key
    AGENT_MAILBOX_KEY = "put_your_AGENT_MAILBOX_KEY_here"

    # Now your agent is ready to join the agentverse!
    agent = Agent(
        name="alice",
        seed=SEED_PHRASE,
        mailbox=f"{AGENT_MAILBOX_KEY}@https://agentverse.ai",
    )

    @agent.on_message(model=Message, replies={Message})
    async def handle_message(ctx: Context, sender: str, msg: Message):
        ctx.logger.info(f"Received message from {sender}: {msg.message}")

        # send the response
        ctx.logger.info("Sending message to bob")
        await ctx.send(sender, Message(message="hello there bob"))

    if __name__ == "__main__":
        agent.run()
   ```

Remember that you need to paste the **Mailbox API Key** within your local agent code above by filling up the `AGENT_MAILBOX_KEY` field inline by following the steps outlined before. You then need to restart the agent.

## Next step

You can find additional information on the **Agentverse Mailbox** feature [here ↗️](/guides/agentverse/agentverse-mailbox/utilising-the-mailbox). This guide shows both the local and Agentverse agents setups to allow for a two-way communication line between these two agents.
