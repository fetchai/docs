<?xml version="1.0" encoding="UTF-8" standalone="no"?><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" contentStyleType="text/css" height="379px" preserveAspectRatio="none" style="width:762px;height:379px;background:#FFFFFF;" version="1.1" viewBox="0 0 762 379" width="762px" zoomAndPan="magnify"><defs/><g><!--MD5=[46bf7fc5b00e2e288be9964da2bc4775]
cluster subql--><g id="cluster_subql"><rect fill="none" height="212" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:1.0;" width="352" x="404.5" y="7"/><rect fill="none" height="10" style="stroke:#181818;stroke-width:1.0;" width="15" x="736.5" y="12"/><rect fill="none" height="2" style="stroke:#181818;stroke-width:1.0;" width="4" x="734.5" y="14"/><rect fill="none" height="2" style="stroke:#181818;stroke-width:1.0;" width="4" x="734.5" y="18"/><text fill="#000000" font-family="sans-serif" font-size="14" font-weight="bold" lengthAdjust="spacing" textLength="109" x="526" y="34.9659">SubQuery Node</text></g><!--MD5=[ce4875be2dd4e8bfcba4b196b0166f44]
cluster gql--><g id="cluster_gql"><rect fill="none" height="149.5" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:1.0;" width="334" x="54.5" y="69.5"/><rect fill="none" height="10" style="stroke:#181818;stroke-width:1.0;" width="15" x="368.5" y="74.5"/><rect fill="none" height="2" style="stroke:#181818;stroke-width:1.0;" width="4" x="366.5" y="76.5"/><rect fill="none" height="2" style="stroke:#181818;stroke-width:1.0;" width="4" x="366.5" y="80.5"/><text fill="#000000" font-family="sans-serif" font-size="14" font-weight="bold" lengthAdjust="spacing" textLength="83" x="180" y="97.4659">Graphql API</text></g><!--MD5=[e8f3788ad7b97e8de68b4194558bc2a1]
cluster db--><g id="cluster_db"><rect fill="none" height="104" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:1.0;" width="132" x="334.5" y="269"/><rect fill="none" height="10" style="stroke:#181818;stroke-width:1.0;" width="15" x="446.5" y="274"/><rect fill="none" height="2" style="stroke:#181818;stroke-width:1.0;" width="4" x="444.5" y="276"/><rect fill="none" height="2" style="stroke:#181818;stroke-width:1.0;" width="4" x="444.5" y="280"/><text fill="#000000" font-family="sans-serif" font-size="14" font-weight="bold" lengthAdjust="spacing" textLength="84" x="358.5" y="296.9659">Postgres DB</text></g><!--MD5=[bcc3f219e56406305f4ae6d11eed632d]
cluster fetchd--><g id="cluster_fetchd"><rect fill="none" height="104" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:1.0;" width="136" x="608.5" y="269"/><rect fill="none" height="10" style="stroke:#181818;stroke-width:1.0;" width="15" x="724.5" y="274"/><rect fill="none" height="2" style="stroke:#181818;stroke-width:1.0;" width="4" x="722.5" y="276"/><rect fill="none" height="2" style="stroke:#181818;stroke-width:1.0;" width="4" x="722.5" y="280"/><text fill="#000000" font-family="sans-serif" font-size="14" font-weight="bold" lengthAdjust="spacing" textLength="88" x="632.5" y="296.9659">Fetchd Node</text></g><!--MD5=[9826acab262751e9a750422ccc9480a1]
entity subql_fetch--><g id="elem_subql_fetch"><rect fill="#F1F1F1" height="49.0679" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="127" x="613" y="45"/><rect fill="#F1F1F1" height="10" style="stroke:#181818;stroke-width:0.5;" width="15" x="720" y="50"/><rect fill="#F1F1F1" height="2" style="stroke:#181818;stroke-width:0.5;" width="4" x="718" y="52"/><rect fill="#F1F1F1" height="2" style="stroke:#181818;stroke-width:0.5;" width="4" x="718" y="56"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="87" x="628" y="79.9659">Fetch service</text></g><!--MD5=[0686720d71d32ea68f81164171d509ce]
entity store--><g id="elem_store"><rect fill="#F1F1F1" height="49.0679" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="126" x="428.5" y="154"/><rect fill="#F1F1F1" height="10" style="stroke:#181818;stroke-width:0.5;" width="15" x="534.5" y="159"/><rect fill="#F1F1F1" height="2" style="stroke:#181818;stroke-width:0.5;" width="4" x="532.5" y="161"/><rect fill="#F1F1F1" height="2" style="stroke:#181818;stroke-width:0.5;" width="4" x="532.5" y="165"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="86" x="443.5" y="188.9659">Store service</text></g><!--MD5=[2b2d5ad518bf6746de4ffeb5be0566d4]
entity manager--><g id="elem_manager"><rect fill="#F1F1F1" height="49.0679" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="157" x="421" y="45"/><rect fill="#F1F1F1" height="10" style="stroke:#181818;stroke-width:0.5;" width="15" x="558" y="50"/><rect fill="#F1F1F1" height="2" style="stroke:#181818;stroke-width:0.5;" width="4" x="556" y="52"/><rect fill="#F1F1F1" height="2" style="stroke:#181818;stroke-width:0.5;" width="4" x="556" y="56"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="117" x="436" y="79.9659">Indexer manager</text></g><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="133" x="6" y="47.398">public gql endpoint</text><rect fill="#F1F1F1" height="12" style="stroke:#181818;stroke-width:1.5;" width="12" x="66.5" y="63.5"/><!--MD5=[a4cd7d68124d9a525004bef556792585]
entity apollo--><g id="elem_apollo"><rect fill="#F1F1F1" height="49.0679" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="128" x="83.5" y="154"/><rect fill="#F1F1F1" height="10" style="stroke:#181818;stroke-width:0.5;" width="15" x="191.5" y="159"/><rect fill="#F1F1F1" height="2" style="stroke:#181818;stroke-width:0.5;" width="4" x="189.5" y="161"/><rect fill="#F1F1F1" height="2" style="stroke:#181818;stroke-width:0.5;" width="4" x="189.5" y="165"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="88" x="98.5" y="188.9659">Apollo server</text></g><!--MD5=[7eae009e615b9b6983304a21ed9c8914]
entity Postgraphile--><g id="elem_Postgraphile"><rect fill="#F1F1F1" height="49.0679" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="125" x="247" y="154"/><rect fill="#F1F1F1" height="10" style="stroke:#181818;stroke-width:0.5;" width="15" x="352" y="159"/><rect fill="#F1F1F1" height="2" style="stroke:#181818;stroke-width:0.5;" width="4" x="350" y="161"/><rect fill="#F1F1F1" height="2" style="stroke:#181818;stroke-width:0.5;" width="4" x="350" y="165"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="85" x="262" y="188.9659">Postgraphile</text></g><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="135" x="325" y="246.898">private DB endpoint</text><rect fill="#F1F1F1" height="12" style="stroke:#181818;stroke-width:1.5;" width="12" x="394.5" y="263"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="133" x="610" y="246.898">public rpc endpoint</text><rect fill="#F1F1F1" height="12" style="stroke:#181818;stroke-width:1.5;" width="12" x="670.5" y="263"/><!--MD5=[474c6a21a9391710d15be2734b05ba1e]
link manager to store--><g id="link_manager_store"><path d="M497.72,94.25 C496.55,109.9 495.01,130.54 493.75,147.35 " fill="none" id="manager-to-store" style="stroke:#181818;stroke-width:1.0;"/><polygon fill="#181818" points="493.38,152.31,498.0376,143.632,493.7515,147.3238,490.0597,143.0377,493.38,152.31" style="stroke:#181818;stroke-width:1.0;"/></g><!--MD5=[06df98e811e1b62c70db994008f65ed5]
link gql_port to apollo--><g id="link_gql_port_apollo"><path d="M76.32,75.95 C85.57,89.15 109.71,123.59 127.32,148.71 " fill="none" id="gql_port-to-apollo" style="stroke:#181818;stroke-width:1.0;"/><polygon fill="#181818" points="130.1,152.68,128.1976,143.0166,127.225,148.5892,121.6524,147.6166,130.1,152.68" style="stroke:#181818;stroke-width:1.0;"/></g><!--MD5=[fb6b7a4e41d84bcc4f7b0a0e69c13180]
link apollo to Postgraphile--><g id="link_apollo_Postgraphile"><path d="M211.73,178.5 C221.34,178.5 230.95,178.5 240.55,178.5 " fill="none" id="apollo-to-Postgraphile" style="stroke:#181818;stroke-width:1.0;"/><polygon fill="#181818" points="245.35,178.5,236.35,174.5,240.35,178.5,236.35,182.5,245.35,178.5" style="stroke:#181818;stroke-width:1.0;"/></g><!--MD5=[b3be81deb4cbbc5e69f0aa4c45737ba9]
link Postgraphile to db_port--><g id="link_Postgraphile_db_port"><path d="M333.89,203.22 C352.45,221.27 377.05,245.19 390.56,258.33 " fill="none" id="Postgraphile-to-db_port" style="stroke:#181818;stroke-width:1.0;stroke-dasharray:7.0,7.0;"/><polygon fill="#181818" points="393.92,261.6,390.2548,252.4585,390.3348,258.1148,384.6785,258.1948,393.92,261.6" style="stroke:#181818;stroke-width:1.0;"/></g><!--MD5=[4de96e170a9014c92c41e15c2968e035]
link store to db_port--><g id="link_store_db_port"><path d="M467.11,203.22 C448.55,221.27 423.95,245.19 410.44,258.33 " fill="none" id="store-to-db_port" style="stroke:#181818;stroke-width:1.0;stroke-dasharray:7.0,7.0;"/><polygon fill="#181818" points="407.08,261.6,416.3215,258.1948,410.6652,258.1148,410.7452,252.4585,407.08,261.6" style="stroke:#181818;stroke-width:1.0;"/></g><!--MD5=[cfa18d4be9920c9950971b2786b1b29a]
link subql_fetch to rpc--><g id="link_subql_fetch_rpc"><path d="M676.5,94.32 C676.5,136.87 676.5,224.45 676.5,256.19 " fill="none" id="subql_fetch-to-rpc" style="stroke:#181818;stroke-width:1.0;stroke-dasharray:7.0,7.0;"/><polygon fill="#181818" points="676.5,261.18,680.5,252.18,676.5,256.18,672.5,252.18,676.5,261.18" style="stroke:#181818;stroke-width:1.0;"/></g><!--MD5=[8727cbac58a6d2dbdf65943347086fef]
@startuml
component "SubQuery Node" as subql {
    component "Fetch service" as subql_fetch
'    () "mappingHandler.ts" as subql_handlers
'    component "Sandbox service" as sandbox

'    sandbox  - -> subql_handlers

    component "Store service" as store
    component "Indexer manager" as manager

    manager - -> store
}

component "Graphql API" as gql {
    port "public gql endpoint" as gql_port

    component "Apollo server" as apollo
    gql_port -> apollo

    component Postgraphile

    apollo -> Postgraphile
}

component "Postgres DB" as db {
    port "private DB endpoint    " as db_port
}

Postgraphile ..> db_port

component "Fetchd Node" as fetchd {
    port "public rpc endpoint" as rpc
}

store ..> db_port
subql_fetch ...> rpc
@enduml

@startuml
component "SubQuery Node" as subql {
    component "Fetch service" as subql_fetch


    component "Store service" as store
    component "Indexer manager" as manager

    manager - -> store
}

component "Graphql API" as gql {
    port "public gql endpoint" as gql_port

    component "Apollo server" as apollo
    gql_port -> apollo

    component Postgraphile

    apollo -> Postgraphile
}

component "Postgres DB" as db {
    port "private DB endpoint    " as db_port
}

Postgraphile ..> db_port

component "Fetchd Node" as fetchd {
    port "public rpc endpoint" as rpc
}

store ..> db_port
subql_fetch ...> rpc
@enduml

PlantUML version 1.2022.7(Mon Aug 22 19:01:30 CEST 2022)
(GPL source distribution)
Java Runtime: OpenJDK Runtime Environment
JVM: OpenJDK 64-Bit Server VM
Default Encoding: UTF-8
Language: en
Country: US
--></g></svg>